var _obj,_node_id,_node_title,_operate,_url_prn="",_onsuccess=function(){},_crn_obj;function custom_tree(b){var a=webRoot;_obj=b;if(typeof(b.url)!="undefined"){b=_get_url(b)}if(typeof(b.multiple)=="undefined"){b.multiple=false}if(typeof(b.width)=="undefined"){b.width=300}if(typeof(b.height)=="undefined"){b.height=400}if(typeof(b.onsuccess)!="undefined"){_onsuccess=b.onsuccess}if(typeof(b.webRoot)!="undefined"){a=b.webRoot}$.colorbox({href:a+"/portal/custom-tree.action",iframe:true,innerWidth:b.width,innerHeight:b.height,overlayClose:false,title:b.title,onClosed:function(){if(_operate=="ok"){_onsuccess.call()}_clear_data()}})}function _get_url(d){var b=d.url;if(b.indexOf("?")>=0){var e=d.url.split("?");d.url=e[0];_url_prn=e[1]}var a=d.postData;if(typeof(a)!="undefined"){for(var c in a){if(typeof(a[c])!="function"){if(_url_prn==""){_url_prn=c+"="+a[c]}else{_url_prn=_url_prn+"&"+c+"="+a[c]}}}}return d}function _clear_data(){_node_id="";_node_title="";_operate="";_url_prn=""}function getSelectValue(f){if(typeof(_node_id)=="undefined"||_node_id==""){return""}if(typeof(_crn_obj.nodeInfo)!="undefined"){var h=0;var a=_crn_obj.nodeInfo;for(var d=0;d<a.length;d++){if(a[d]==f){h=d;break}else{h=-1;continue}}if(h==-1){return""}else{var g=new Array();var c=0;if(_node_id.indexOf(",")<0){var b=_node_id.split("-");if(b.length>h){if(b[h]!=""&&typeof(b[h])!="undefined"){g[0]=b[h];return g}}}else{var e=_node_id.split(",");for(var d=0;d<e.length;d++){var b=e[d].split("-");if(b[h]!=""&&typeof(b[h])!="undefined"){g[c]=b[h];c++}}return g}}}return""}function getSelectNodeId(){if(typeof(_node_id)!="undefined"){if(_node_id.indexOf(",")<0){var a=new Array();a[0]=_node_id;return a}else{return _node_id.split(",")}}return""}function getSelectNodeTitle(){if(typeof(_node_title)!="undefined"){if(_node_title.indexOf(",")<0){var a=new Array();a[0]=_node_title;return a}else{return _node_title.split(",")}}return""}function getSelectValueByIndex(b){if(typeof(_node_id)=="undefined"||_node_id==""||typeof(b)=="undefined"){return""}if(b<=0){return""}var f=b-1;var e=new Array();if(_node_id.indexOf(",")<0){var a=_node_id.split("-");if(a.length>f){e[0]=a[f];return e}}else{var d=_node_id.split(",");for(var c=0;c<d.length;c++){var a=d[c].split("-");e[c]=a[f]}return e}return""};
